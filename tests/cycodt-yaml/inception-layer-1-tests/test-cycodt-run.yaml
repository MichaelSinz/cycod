class: run-tests
tag: inception
tests:
- name: cycodt run simple.yaml
  command: cycodt run --file simple.yaml --output-file test-results-simple.trx
  expect-regex: |
    Found 1 test...

    Starting test: yaml.simple.simple.running simple process
    Passed \(.*\): yaml.simple.simple.running simple process

    TEST RESULT SUMMARY:

    Passed: 1 \(100.0%\)

    Tests: 1
    Results: .*[\\/]tests[\\/]cycodt-yaml[\\/]inception-layer-1[\\/]test-results-simple.trx

- name: cycodt run simple.yaml w/ all optional
  command: cycodt run --file simple.yaml --include-optional --output-file test-results-simple-optional.trx
  expect-regex: |
    Found 3 tests...

    Starting test: yaml.simple.simple.running simple process
    Passed \(.*\): yaml.simple.simple.running simple process
    Starting test: yaml.simple.simple.running simple script w/ regex expectation
    Passed \(.*\): yaml.simple.simple.running simple script w/ regex expectation
    Starting test: yaml.simple.simple.running bash script w/ regex expectation
    Passed \(.*\): yaml.simple.simple.running bash script w/ regex expectation

    TEST RESULT SUMMARY:

    Passed: 3 \(100.0%\)

    Tests: 3
    Results: .*[\\/]tests[\\/]cycodt-yaml[\\/]inception-layer-1[\\/]test-results-simple-optional.trx

- name: cycodt run simple2.yaml
  command: cycodt run --file simple2.yaml --output-file test-results-simple2.trx
  expect-regex: |
    Found 2 tests...

    Starting test: yaml.simple2.simple2.output into file
    Passed \(.*\): yaml.simple2.simple2.output into file
    Starting test: yaml.simple2.simple2.checkout output into file
    Passed \(.*\): yaml.simple2.simple2.checkout output into file

    TEST RESULT SUMMARY:

    Passed: 2 \(100.0%\)

    Tests: 2
    Results: .*[\\/]tests[\\/]cycodt-yaml[\\/]inception-layer-1[\\/]test-results-simple2.trx

- name: check simple2.yaml file output
  workingDirectory: ../testresults
  command: cat hello.txt
  expect-regex: hello